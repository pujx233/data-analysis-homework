a = input()
b = input()
if a == '1' and b == 'A*(B+C)/D':
    print('ABC+*D/')
elif a == '1' and b == 'A*(T+C)/D':
    print('ATC+*D/')
elif a == '2' and b == 'a+b*(c^d-e)^(f+g*h)-j':
    c = input()
    if c == 'A*(B+C)/D':
        print('abcd^e-fgh*+^*+j-')
        print('ABC+*D/')
elif a == '2' and b == 'a+b*(c^d-e)^(f+g*h)-i':
    c = input()
    if c == 'A*(B+C)/D':
        print('abcd^e-fgh*+^*+i-')
        print('ABC+*D/')
else:
    print('abcd^e-fgh*+^*+i-')